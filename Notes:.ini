Notes:


Image size: Different distribution of dimensions
Image format: jpg
Image type: uint8
Image channels: 3
Image depth: 8
Image compression: None



Original (distorted) images:  23118
Generated (corrected) images: 23118
Pairs matched:               23118 (both exist)
Distorted formats: {'.jpg'}
Corrected formats: {'.jpg'}

Pair to pair mismatch:
Pair 001: 2048×1367
Pair 002: 2048×1366   ← different from pair 001
Pair 003: 2048×1342   ← different again


Pairs with different dims: 0 pairs
Each PAIR has matching dimensions:
Pair 001:  distorted = 2048×1367  ←→  corrected = 2048×1367  ✓ same
Pair 002:  distorted = 2048×1366  ←→  corrected = 2048×1366  ✓ same
Pair 003:  distorted = 2048×1365  ←→  corrected = 2048×1365  ✓ same




Before removing portrait images
1. ALL pairs same size: True

2. Aspect ratio distribution:
   Min:    0.6636. Few pairs have portrait images 
   Max:    1.5261
   Mean:   1.4943
   Std:    0.0649

3. Center vs Edge difference (confirms barrel):
   Center diff mean: 5.064
   Edge diff mean:   6.775
   Ratio mean:       2.50x
   Ratio std:        2.34

4. Distortion magnitude spread:
   Min overall diff:    0.000
   Max overall diff:    30.710
   Mean overall diff:   6.769

5. Height variation:
   Unique heights: 20
   Height range:   1342 → 2048
   This means 20 different camera aspect ratios


After removing portrait images

1. ALL pairs same size: True

2. Aspect ratio distribution:
   Min:    1.3351
   Max:    1.5261
   Mean:   1.4993
   Std:    0.0079

3. Center vs Edge difference (confirms barrel):
   Center diff mean: 5.064
   Edge diff mean:   6.781
   Ratio mean:       2.51x
   Ratio std:        2.35

4. Distortion magnitude spread:
   Min overall diff:    0.000
   Max overall diff:    30.710
   Mean overall diff:   6.770

5. Height variation:
   Unique heights: 19
   Height range:   1342 → 1534
   This means 19 different camera aspect ratios


Insights:
All landscape images have:
  Min ratio:  1.3351
  Max ratio:  1.5261
  Mean:       1.4993
  Std:        0.0079

Range of ratios: 1.5261 - 1.3351 = 0.191
Std:             0.0079

This means 99% of images fall within:
  1.4993 ± (3 × 0.0079) = 1.476 → 1.523

Nearly all images are the SAME aspect ratio.
The variation in heights (1342→1534) is NOT from different cameras.


Width is fixed:  2048
Aspect ratio ≈ 1.499 (nearly constant)
Expected height: 2048 / 1.499 ≈ 1366

But heights range 1342 → 1534.

The ONLY explanation:
  Heights vary because the company crops different amounts
  from top/bottom AFTER undistortion.
  
  More distortion → more black border → more crop → shorter height
  Less distortion → less black border → less crop → taller height

This means height IS k1 after all — just hidden differently than we thought.

HEIGHT IS YOUR FREE LABEL.

Taller image  = less distortion = smaller |k1|
Shorter image = more distortion = larger  |k1|




100%|██████████| 994/994 [00:59<00:00, 16.71it/s]
Correlation: height vs overall_diff
  Pearson r:  0.0341
  p-value:    0.282730
  WEAK correlation

Tight center (±1% zone):
  Mean diff:   1.9772
  Median diff: 1.1915

Single center pixel:
  Mean diff:   0.9054
  Median diff: 1.0000
  % near zero (<1.0): 41.0%
  % near zero (<2.0): 89.3%

Height buckets vs mean distortion:
height_bucket
(1341.808, 1361.2]    6.960312
(1361.2, 1380.4]      6.755474
(1380.4, 1399.6]           NaN
(1399.6, 1418.8]           NaN
(1418.8, 1438.0]           NaN
(1438.0, 1457.2]           NaN
(1457.2, 1476.4]           NaN
(1476.4, 1495.6]           NaN
(1495.6, 1514.8]           NaN
(1514.8, 1534.0]      7.558365

Height buckets with actual data:
  1342-1361: mean diff = 6.96   ← slightly shorter, slightly more distortion
  1361-1380: mean diff = 6.75   ← the main bulk (1366px images)
  1515-1534: mean diff = 7.56   ← much taller, slightly MORE distortion??

Everything else: NaN (no images exist in those buckets)
The NaN buckets between 1380 and 1515 is critical:
Heights that exist:    1342-1380   and   1515-1534
Heights that DON'T:    1380-1515
This is a BIMODAL distribution hiding in the data.
Two distinct groups. Not a continuum.


Plot 2: Height Distribution — The Dominant Finding
There is ONE massive spike at ~1366px.
Then a tiny cluster at ~1342-1361.
Then a few outliers at ~1534.

This is NOT 20 different cameras.
This is ONE camera (2048×1366) that is standard,
with a handful of exceptions.




Plot 6: Aspect Ratio — Confirms Single Camera
Single spike at exactly 1.500
Std = 0.0079 (essentially zero variance)

2048 / 1366 = 1.499 ≈ 1.500 ✓

This is ONE camera body: 2048×1366
The ~1534 height outliers: 2048/1534 = 1.335 → different sensor or crop mode



Plot 3: Height vs Distortion — Weak Correlation Explained
Pearson r = 0.034  (essentially zero)

Why? Because almost ALL images are the same height (1366).
Within that cluster, height doesn't vary → cannot correlate.

The variation in distortion (0-30) at fixed height = 1366
means the LENS is changing, not the camera.

Same camera body. Different lenses attached.
Each lens has its own k1/k2.



Plot 4: Center Pixel Diff — Clean Result
Median: 1.0
89.3% below 2.0
Files are JPEG

This is pure JPEG compression noise.
Center of image is geometrically unchanged. ✓
k1/k2 model is exactly the right approach. ✓



Plot 5: Edge/Center Ratio — Wide Spread is Normal
Peak at 2-3x, tail out to 20x

This wide spread makes sense now:
  Low ratio (2-3x):  mild lens, barely any distortion
  High ratio (20x):  strong wide-angle lens, heavy distortion

Same camera, MANY different lenses = wide ratio range.
This is not noise. This is real signal.



Plot 1: Distortion Magnitude — The Long Tail
Main bulk: 0-15 (most lenses mild to moderate)
Long tail: 15-30 (a few wide-angle or fisheye lenses)
Near-zero cluster: the identical/no-distortion pairs



What your dataset actually is:

ONE camera body (2048×1366, aspect=1.500)
MANY different lenses attached to it
Each lens has its own k1, k2

The company photographs real estate:
  Standard lens  → mild distortion  → overall_diff ≈ 3-7
  Wide angle     → heavy distortion → overall_diff ≈ 15-25
  Ultra-wide     → very heavy       → overall_diff ≈ 25-30

The two height groups:
  1342-1380 (main bulk): standard processing pipeline
  1515-1534 (small group): different crop setting OR different camera mode

  